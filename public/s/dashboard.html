<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="theme-color" content="#7740d7">
	<title>Dashboard &bull; sumaryz</title>
	<!-- CSS -->
	<link rel="stylesheet" href="../assets/css/index.css">
	<link rel="stylesheet" href="src/styles/index.css">
    <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i|Nunito:300,400,700,900" rel="stylesheet"> 
    <link rel="shortcut icon" href="favicon.png">
</head>

<body class="bg-light">
	<!-- 
		(^_^)
	-->
	<nav class="navbar navbar-expand navbar-light sticky-top bg-white pl-0 pr-sm-5 text-nowrap">
		<span class="navbar-brand bg-primary">
			<img src="../assets/icons/logo.svg" class="" height="40">
		</span>
		<div class="navbar-nav ml-auto ml-sm-0">
			<a class="nav-item nav-link d-none d-sm-block active" href="./">Dashboard</a>		
		</div>
		<div class="navbar-nav ml-0 ml-sm-auto">
			<!--div class="nav-item dropdown">
				<a href="" class="nav-link dropdown-toggle pr-0" id="dropdownLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
					<svg class="navicon mr-2" style="">
						<use xlink:href="../assets/icons/symbol-defs.svg#face"/>
					</svg>
				</a>
				<div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownLink">
					<a class="dropdown-item" href="views/profile">
						<svg class="navicon align-text-bottom mr-3" style="fill:#717083">
							<use xlink:href="../assets/icons/symbol-defs.svg#edit"/>
						</svg>Profile</a>
					<div class="dropdown-divider"></div>
					<a class="dropdown-item" href="#">
						<svg class="navicon align-text-bottom mr-3" style="fill:#6a7f77">
							<use xlink:href="../assets/icons/symbol-defs.svg#exit"/>
						</svg>Logout</a>
				</div >
			</div -->
		</div>
	</nav>

	<!-- 
		(-_-)
	-->
	<main class="container py-5">
		<h6 class="p-2 text-secondary font-italic">Click Add to create course(s) or click on the course you have created to add summaries</h6>
		<div class="row">
			<!-- card for course -->
			
			<!--/-->
			<!-- card for add new -->
			<div class="col-sm-4 col-lg-3 px-4 mb-4">
				<a href="src/views/home/" class="card card--add text-center justify-content-center h-100">
					<div class="card-body unset">
						<svg class="navicon display-4">
							<use xlink:href="../assets/icons/symbol-defs.svg#pen"/>
						</svg>
					</div>
					<div class="card-body unset">
						<h5 class="card-title font-weight-bold font-italic">Add</h5>
					</div>
				</a>
			</div>
			<!--/-->
		</div>
	</main>
	<script src="../js/ajaxModule.js"></script>
	<script type="text/javascript">
		window.addEventListener("load", function() {
			var hr = ajaxObj("POST", "../requests/get_courses.php");
			hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
			hr.onreadystatechange = function() {
				if (ajaxReturn(hr) == true) {
					console.log(hr.responseText);
					var d = JSON.parse(hr.responseText);
					if (d.f) {
						_('.row').innerHTML += '<div class="col-12 col-sm-4 col-lg-3 px-4 mb-4"><a class="card flex-row flex-sm-column text-sm-center pl-3 pl-sm-0 pt-sm-3">'+d.f+'<div class="card-body my-auto w-100 my-sm-0 pt-sm-0 pb-4"></div></a></div>';
					} else if (d.l) {
						window.location = './';
					} else {
						for (var o in d) {
							_('.row').innerHTML += '<div class="col-12 col-sm-4 col-lg-3 px-4 mb-4"><a href="#" onclick="add_summaries(\''+d[o].course_code+'\')" class="card flex-row flex-sm-column text-sm-center pl-3 pl-sm-0 pt-sm-3"><img src="../assets/icons/institution.svg" class="mx-auto my-3" alt="Course"><div class="card-body my-auto w-100 my-sm-0 pt-sm-0 pb-4"><h6 class="font-weight-bold font-italic mb-1">'+d[o].course_code+'</h6><p class="small font-weight-bold text-secondary m-0">'+d[o].course_title+'</p></div></a></div>';
						}
					}
				}
			}
			hr.send("getCourses=" + 20);
		});
		
		//adding summaries to specific course
		function add_summaries(course_code){
			localStorage.setItem("c_code", course_code);
			window.location = './src/views/home/summary';
		}
	</script>
</body>
</html>